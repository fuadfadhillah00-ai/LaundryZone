/* ========= THEME ========= */
:root{
  --blue:#0B63CE; --blue-2:#2A7FF0; --blue-dark:#084c9e; --blue-soft:#e8f1ff;
  --white:#ffffff; --gray-1:#f5f7fb; --gray-2:#e6e9ef; --gray-3:#c9d2de;
  --text:#102a43; --muted:#627d98; --success:#198754; --danger:#d9534f;
  --shadow:0 12px 22px rgba(11,99,206,.12); --radius:18px; --overlay:rgba(16,42,67,.35);
}
[data-theme="dark"]{
  --blue:#2A7FF0; --blue-2:#66A7FF; --blue-dark:#1b63c7; --blue-soft:#0b63ce18;
  --white:#0f1723; --gray-1:#0b111b; --gray-2:#152233; --gray-3:#27405a;
  --text:#e6edf6; --muted:#9fb2c6; --overlay:rgba(0,0,0,.5);
  --shadow:0 12px 24px rgba(0,0,0,.35);
}

*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Inter,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--gray-1);color:var(--text);overflow-x:hidden;transition:background .3s,color .3s}
a{color:var(--blue);text-decoration:none}
.container{max-width:1200px;margin:0 auto;padding:0 20px}

/* ========= NAV ========= */
.nav{position:sticky;top:0;background:linear-gradient(180deg,var(--white),#ffffffd9);backdrop-filter:blur(8px);border-bottom:1px solid var(--gray-2);z-index:20}
.nav-inner{display:flex;justify-content:space-between;align-items:center;padding:12px 0}
.brand{display:flex;align-items:center;gap:.7rem;font-weight:900;color:var(--blue)}
.brand .logo{width:40px;height:40px;background:var(--blue);border-radius:12px;display:grid;place-items:center;color:#fff;font-size:1.2rem;animation:spin 8s linear infinite}
.menu{position:relative;display:flex;gap:6px;flex-wrap:wrap}
.menu button{background:transparent;border:0;padding:.7rem 1rem;border-radius:12px;color:var(--muted);cursor:pointer;font-weight:700;transition:.25s}
.menu button.active,.menu button:hover{color:var(--blue);}
.menu .ink{position:absolute;bottom:0;height:3px;background:var(--blue);border-radius:999px;transition:all .25s ease}
.right-actions{display:flex;align-items:center;gap:10px}

.toggle{display:inline-flex;align-items:center;gap:8px;padding:.4rem .7rem;border:1px solid var(--gray-2);border-radius:999px;cursor:pointer}

/* ========= LAYOUT ========= */
.card{background:var(--white);border:1px solid var(--gray-2);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px;transition:.35s;opacity:0;transform:translateY(18px)}
.card.show{opacity:1;transform:translateY(0)}
.grid{display:grid;gap:18px}
.grid.cols-2{grid-template-columns:repeat(2,1fr)}
.grid.cols-3{grid-template-columns:repeat(3,1fr)}
.grid.cols-4{grid-template-columns:repeat(4,1fr)}
@media(max-width:1080px){.grid.cols-4{grid-template-columns:repeat(2,1fr)}}
@media(max-width:980px){.grid.cols-2,.grid.cols-3{grid-template-columns:1fr}}

h1{font-size:1.9rem;margin-bottom:6px}
h2{font-size:1.15rem;color:var(--muted)}
h3{margin-bottom:6px}
.chip{padding:.35rem .7rem;background:var(--blue-soft);color:var(--blue);border-radius:999px;font-size:.75rem;font-weight:700;display:inline-block}
.field{display:grid;gap:6px;margin-top:8px}
.input,select,textarea{padding:.75rem;border-radius:14px;border:1px solid var(--gray-2);background:transparent;color:inherit}
.btn{display:inline-flex;align-items:center;gap:.5rem;padding:.85rem 1.2rem;border-radius:14px;border:1px solid transparent;background:var(--blue);color:#fff;cursor:pointer;font-weight:700;box-shadow:var(--shadow);transition:.25s;transform:translateY(0)}
.btn:hover{background:var(--blue-dark);transform:translateY(-2px)}
.btn.secondary{background:transparent;color:var(--blue);border-color:var(--blue)}
.btn.icon{padding:.5rem .7rem}
.pill{display:inline-flex;gap:8px;align-items:center;border:1px solid var(--gray-2);padding:.3rem .6rem;border-radius:999px}

.footer{margin-top:40px;padding:20px 0;border-top:1px solid var(--gray-2);color:var(--muted);text-align:center}

/* ========= TOAST / NOTIF ========= */
.toast{position:fixed;bottom:20px;right:20px;background:var(--blue);color:#fff;padding:12px 18px;border-radius:12px;box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:.35s;z-index:40}
.toast.show{opacity:1;pointer-events:auto}
.notif-bubble{position:fixed;top:86px;right:20px;display:grid;gap:10px;z-index:30}
.notif{background:var(--white);border:1px solid var(--gray-2);box-shadow:var(--shadow);border-radius:12px;padding:10px 12px;font-size:.9rem;animation:slideIn .35s}

/* ========= TRACKER ========= */
.steps{display:flex;gap:10px;align-items:center;margin:10px 0}
.step{flex:1;height:6px;background:var(--gray-2);border-radius:6px;position:relative}
.step::after{content:"";position:absolute;inset:0;width:0;background:var(--blue-2);border-radius:6px;transition:width .5s}
.step.done::after{width:100%}
.status{padding:.35rem .7rem;border-radius:999px;font-size:.8rem;font-weight:700;background:var(--blue-soft);color:var(--blue)}
.progress{width:100%;height:10px;background:var(--gray-2);border-radius:8px;overflow:hidden;margin-top:6px}
.progress-bar{height:10px;background:var(--blue);width:0;transition:width .6s ease}

/* ========= MAP ========= */
.map{position:relative;width:100%;height:340px;background:linear-gradient(135deg,#eaf3ff,#f7fbff);border:1px dashed var(--blue);border-radius:var(--radius);margin-top:14px;overflow:hidden;touch-action:pan-x pan-y}
.gridline{position:absolute;left:0;top:0;right:0;bottom:0;background-image:linear-gradient(to right, rgba(10,99,206,.08) 1px, transparent 1px),linear-gradient(to bottom, rgba(10,99,206,.08) 1px, transparent 1px);background-size:40px 40px;pointer-events:none}
.marker{position:absolute;width:24px;height:24px;background:var(--blue);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:.85rem;transform:translate(-50%,-50%);cursor:grab}
.marker:active{cursor:grabbing}
.marker.poi{background:#fff;color:var(--blue);border:2px solid var(--blue);font-size:1rem}
.eta{position:absolute;bottom:10px;left:10px;background:var(--white);border:1px solid var(--gray-2);border-radius:10px;padding:6px 10px;box-shadow:var(--shadow)}
svg.route{position:absolute;inset:0}

/* ========= CHAT ========= */
.chat{display:flex;flex-direction:column;height:260px;border:1px solid var(--gray-2);border-radius:14px;overflow:hidden}
.chat-log{flex:1;background:var(--white);padding:12px;overflow:auto}
.msg{max-width:80%;padding:10px 12px;border-radius:14px;margin:6px 0;box-shadow:var(--shadow)}
.me{background:var(--blue);color:#fff;margin-left:auto;border-bottom-right-radius:4px}
.them{background:#fff;border:1px solid var(--gray-2);color:var(--text);border-bottom-left-radius:4px}
.chat-input{display:flex;gap:8px;padding:10px;border-top:1px solid var(--gray-2);background:var(--white)}
.chat-input input{flex:1}

/* ========= MODAL ========= */
.modal{position:fixed;inset:0;background:var(--overlay);display:none;align-items:center;justify-content:center;z-index:50}
.modal .panel{background:var(--white);border:1px solid var(--gray-2);border-radius:18px;padding:20px;min-width:320px;max-width:520px;box-shadow:var(--shadow)}

/* ========= CARDS / LIST ========= */
.hlist{display:flex;gap:12px;overflow:auto;padding-bottom:6px}
.shop-card{min-width:260px;display:flex;flex-direction:column;gap:6px}
.row{display:flex;align-items:center;justify-content:space-between;gap:10px}

/* ========= REWARD ========= */
.reward{display:flex;align-items:center;gap:12px}
.badge{padding:.2rem .5rem;border-radius:999px;border:1px solid var(--gray-2)}

/* ========= ANIMATIONS ========= */
@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
@keyframes slideIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.slide{animation:slideIn .35s ease}
